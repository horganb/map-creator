(this["webpackJsonpmap-creator"]=this["webpackJsonpmap-creator"]||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(10),r=n.n(i),s=(n(87),n(88),n(30)),o=n(13),j=n(50),l=n(49),u=n(26),b=n(24),d=n(11),O=n(22),p=n.n(O),h=n(147),f=n(3),m="https://map-creator-backend.herokuapp.com",v={name:"Untitled Map",image:{url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"},pins:{}},x=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(o.g)();Object(c.useEffect)((function(){p.a.get("".concat(m,"/maps")).then((function(e){var t=e.data;a(t)})).catch((function(e){console.error(e)}))}),[]);var r=function(e){i.push("/maps/".concat(e))},s=n.map((function(e){var t=e.name,n=e._id;return Object(f.jsx)(h.a,{className:"map-button",variant:"contained",onClick:function(){return r(n)},children:t},n)}));return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)(h.a,{className:"map-button",variant:"contained",color:"primary",onClick:function(){p.a.post("".concat(m,"/maps"),v).then((function(e){var t=e.data;r(t)})).catch((function(e){console.error(e)}))},children:"Create New"}),s]})})},g=n(156),w=n(151),N=n(152),C=n(158),y=n(153),S=n(154),k=n(46),E=n.n(k),I=n(47),A=n.n(I),T=n(157),F=function(e,t){var n=Object(c.useState)(e),a=Object(d.a)(n,2),i=a[0],r=a[1],s=Object(o.h)().mapId,j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.SET,n=Object(u.a)({},t,e);p.a.put("".concat(m,"/maps/").concat(s),n).then((function(){})).catch((function(e){console.error(e)}))};return[i,function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r(e),n&&j(Object(u.a)({},t,e))}]},L={SET:"$set",UNSET:"$unset"},B=function(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}},R=function(){var e=Object(o.h)().mapId,t=Object(o.g)(),n=F("","image.url"),a=Object(d.a)(n,2),i=a[0],r=a[1],s=F("","name"),O=Object(d.a)(s,2),v=O[0],x=O[1],N=F({},"pins"),C=Object(d.a)(N,2),y=C[0],S=C[1],k=Object(c.useState)(),I=Object(d.a)(k,2),A=I[0],L=I[1],R=Object(c.useState)(!0),z=Object(d.a)(R,2),M=z[0],P=z[1],X=Object(c.useState)(!1),_=Object(d.a)(X,2),D=_[0],H=_[1],U=Object(c.useState)(),q=Object(d.a)(U,2),J=q[0],W=q[1],$=Object(c.useState)(),G=Object(d.a)($,2),K=(G[0],G[1]),Q=Object(c.useRef)({});Object(c.useEffect)((function(){e&&(P(!0),p.a.get("".concat(m,"/maps/").concat(e)).then((function(e){var t=e.data;H(!1);var n=t.name,c=t.image,a=t.pins;r(c.url,!1),x(n,!1),S(a,!1)})).catch((function(e){console.error(e),H(!0)})).then((function(){P(!1)})))}),[e]);Object(c.useEffect)((function(){var e=function(){K({height:window.innerHeight,width:window.innerWidth})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var V=!M&&!D,Z=y[A];return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(h.a,{className:"return-home",variant:"contained",color:"secondary",onClick:function(){t.push("/")},children:"Back to Home"}),V&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("br",{}),Object(f.jsx)(g.a,{className:"map-name",label:"Map Name",value:v,onChange:function(e){return x(e.target.value)},variant:"outlined"}),Object(f.jsx)("br",{}),Object(f.jsx)(g.a,{className:"image-url",label:"Image URL",value:i,onChange:function(e){return r(e.target.value)},variant:"filled"})]})]}),Object(f.jsxs)("div",{className:"content",children:[M&&Object(f.jsx)(w.a,{}),Object(f.jsxs)("div",{className:"image-wrapper",children:[J&&Object.keys(y).map((function(e){var t=y[e];if(t){var n=t.x,c=t.y,a=A===e,i=B(J),r=i.left,s=i.top;return Object(f.jsx)(E.a,{className:"pin",style:{left:"".concat(r+n*J.width,"px"),top:"".concat(s+c*J.height,"px"),color:a?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%)".concat(a?"scale(2)":"")},onClick:function(){return function(e){L(e===A?null:e)}(e)},onContextMenu:function(t){return function(e,t){t.preventDefault(),y[e];var n=Object(j.a)(y,[e].map(l.a));S(n),L()}(e,t)},ref:function(t){(null===Q||void 0===Q?void 0:Q.current)&&(Q.current[e]=t)}},e)}})),Object(f.jsx)("img",{src:i,onClick:function(e){var t=B(J),n=t.left,c=t.top,a=e.pageX-n,i=e.pageY-c,r=a/J.width,s=i/J.height;console.log(e.pageY,c),function(e,t){var n=Object(T.a)();S(Object(b.a)(Object(b.a)({},y),{},Object(u.a)({},n,{x:e,y:t})))}(r,s)},className:"App-logo",alt:"logo",ref:function(e){e&&e!==J&&W(e)}})]})]}),Object(f.jsx)("div",{className:"footer",children:Z&&Object(f.jsx)(Y,{pin:Z,onClose:function(){return L()},setPin:function(e){S(Object(b.a)(Object(b.a)({},y),{},Object(u.a)({},A,e)))}})}),D&&Object(f.jsx)("p",{children:"Could not load the requested map!"})]})})},Y=function(e){var t=e.pin,n=e.setPin,c=e.onClose,a=t.title,i=t.description;return Object(f.jsxs)(N.a,{className:"description-card",children:[Object(f.jsx)(C.a,{title:Object(f.jsx)(g.a,{className:"title-field",label:"Item Title",value:a,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{title:e.target.value}))}}),action:Object(f.jsx)(y.a,{onClick:c,children:Object(f.jsx)(A.a,{})})}),Object(f.jsx)(S.a,{children:Object(f.jsx)(g.a,{className:"body-field",label:"Item Description",value:i,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{description:e.target.value}))},variant:"outlined",multiline:!0,rows:3})})]})},z=n(155),M=n(159),P=function(){var e=Object(o.h)().mapId,t=F("","image.url"),n=Object(d.a)(t,2),i=n[0],r=n[1],s=F("","name"),j=Object(d.a)(s,2),l=(j[0],j[1]),u=F({},"pins"),b=Object(d.a)(u,2),O=b[0],h=b[1],v=Object(c.useState)(),x=Object(d.a)(v,2),g=x[0],N=x[1],C=Object(c.useState)(!0),y=Object(d.a)(C,2),S=y[0],k=y[1],I=Object(c.useState)(!1),A=Object(d.a)(I,2),T=A[0],L=A[1],R=Object(c.useState)(),Y=Object(d.a)(R,2),P=Y[0],_=Y[1],D=Object(c.useState)(),H=Object(d.a)(D,2),U=(H[0],H[1]),q=Object(c.useRef)({}),J=(Object(c.useRef)(),Object(c.useState)([])),W=Object(d.a)(J,2),$=W[0],G=W[1],K=Object(o.g)();Object(c.useEffect)((function(){p.a.get("".concat(m,"/maps")).then((function(e){var t=e.data;G(t)})).catch((function(e){console.error(e)}))}),[]);var Q=function(){U({height:window.innerHeight,width:window.innerWidth})};Object(c.useEffect)((function(){return Q(),window.addEventListener("resize",Q),function(){window.removeEventListener("resize",Q)}}),[]),Object(c.useEffect)((function(){setTimeout((function(){Q()}),100)}),[]),Object(c.useEffect)((function(){e&&(k(!0),p.a.get("".concat(m,"/maps/").concat(e)).then((function(e){var t=e.data;L(!1);var n=t.name,c=t.image,a=t.pins;r(c.url,!1),l(n,!1),h(a,!1)})).catch((function(e){console.error(e),L(!0)})).then((function(){k(!1)})))}),[e]);var V=!S&&!T,Z=$.map((function(e){var t=e.name,n=e._id;return Object(f.jsx)(z.a,{value:n,children:t},n)})),ee=O[g];return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[V&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(M.a,{value:e,exclusive:!0,onChange:function(e,t){console.log(t),K.push("/maps/".concat(t,"/view"))},style:{display:"block",marginBottom:"8px"},children:Z}),"Tap on an item to learn more about it."]}),Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)("div",{className:"image-wrapper",children:[P&&Object.keys(O).map((function(e){var t=O[e];if(t){var n=t.x,c=t.y,i=g===e,r=B(P),s=r.left,o=r.top;return Object(f.jsx)(a.a.Fragment,{children:Object(f.jsx)(E.a,{className:"pin",style:{left:"".concat(s+n*P.width,"px"),top:"".concat(o+c*P.height,"px"),color:i?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%) ".concat(i?"scale(1.3)":"scale(1)")},onClick:function(){return function(e){N(e===g?null:e)}(e)},ref:function(t){(null===q||void 0===q?void 0:q.current)&&(q.current[e]=t)}})},e)}})),Object(f.jsx)("img",{src:i,className:"App-logo",alt:"logo",ref:function(e){e&&e!==P&&_(e)}})]})}),Object(f.jsx)("div",{className:"footer",children:Object(f.jsx)(X,{pin:ee,onClose:function(){return N()}})})]}),S&&Object(f.jsx)(w.a,{}),T&&Object(f.jsx)("p",{children:"Could not load the requested map!"})]})})},X=function(e){var t=e.pin,n=e.onClose,c=t||{},a=c.title,i=c.description;return Object(f.jsxs)(N.a,{className:"description-card",style:t?{opacity:1}:{opacity:0},children:[Object(f.jsx)(C.a,{title:Object(f.jsx)("h5",{className:"desc-header",children:a}),action:Object(f.jsx)(y.a,{onClick:n,children:Object(f.jsx)(A.a,{})})}),Object(f.jsx)(S.a,{children:Object(f.jsx)("p",{className:"desc-body",children:i})})]})},_=function(){return Object(f.jsx)(s.a,{basename:"/",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",children:Object(f.jsx)(x,{})}),Object(f.jsx)(o.b,{path:"/maps/:mapId/view",children:Object(f.jsx)(P,{})}),Object(f.jsx)(o.b,{path:"/maps/:mapId",children:Object(f.jsx)(R,{})}),Object(f.jsx)(o.a,{to:"/"})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(_,{})}),document.getElementById("root")),D()},87:function(e,t,n){},88:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.3db023c1.chunk.js.map