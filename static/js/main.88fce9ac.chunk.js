(this["webpackJsonpmap-creator"]=this["webpackJsonpmap-creator"]||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(10),i=n.n(r),s=(n(87),n(88),n(30)),o=n(13),j=n(50),l=n(49),u=n(26),b=n(24),d=n(11),O=n(22),p=n.n(O),h=n(147),f=n(3),m="https://map-creator-backend.herokuapp.com",v={name:"Untitled Map",image:{url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"},pins:{}},x=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(o.g)();Object(c.useEffect)((function(){p.a.get("".concat(m,"/maps")).then((function(e){var t=e.data;a(t)})).catch((function(e){console.error(e)}))}),[]);var i=function(e){r.push("/maps/".concat(e))},s=n.map((function(e){var t=e.name,n=e._id;return Object(f.jsx)(h.a,{className:"map-button",variant:"contained",onClick:function(){return i(n)},children:t},n)}));return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)(h.a,{className:"map-button",variant:"contained",color:"primary",onClick:function(){p.a.post("".concat(m,"/maps"),v).then((function(e){var t=e.data;i(t)})).catch((function(e){console.error(e)}))},children:"Create New"}),s]})})},g=n(156),w=n(151),N=n(152),C=n(158),y=n(153),S=n(154),k=n(46),E=n.n(k),I=n(47),A=n.n(I),F=n(157),L=function(e,t){var n=Object(c.useState)(e),a=Object(d.a)(n,2),r=a[0],i=a[1],s=Object(o.h)().mapId,j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.SET,n=Object(u.a)({},t,e);p.a.put("".concat(m,"/maps/").concat(s),n).then((function(){})).catch((function(e){console.error(e)}))};return[r,function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i(e),n&&j(Object(u.a)({},t,e))}]},T={SET:"$set",UNSET:"$unset"},R=function(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}},Y=function(){var e=Object(o.h)().mapId,t=Object(o.g)(),n=L("","image.url"),a=Object(d.a)(n,2),r=a[0],i=a[1],s=L("","name"),O=Object(d.a)(s,2),v=O[0],x=O[1],N=L({},"pins"),C=Object(d.a)(N,2),y=C[0],S=C[1],k=Object(c.useState)(),I=Object(d.a)(k,2),A=I[0],T=I[1],Y=Object(c.useState)(!0),B=Object(d.a)(Y,2),M=B[0],P=B[1],X=Object(c.useState)(!1),_=Object(d.a)(X,2),D=_[0],H=_[1],U=Object(c.useState)(),q=Object(d.a)(U,2),J=q[0],W=q[1],$=Object(c.useState)(),G=Object(d.a)($,2),K=(G[0],G[1]),Q=Object(c.useRef)({});Object(c.useEffect)((function(){e&&(P(!0),p.a.get("".concat(m,"/maps/").concat(e)).then((function(e){var t=e.data;H(!1);var n=t.name,c=t.image,a=t.pins;i(c.url,!1),x(n,!1),S(a,!1)})).catch((function(e){console.error(e),H(!0)})).then((function(){P(!1)})))}),[e]);Object(c.useEffect)((function(){var e=function(){K({height:window.innerHeight,width:window.innerWidth})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var V=!M&&!D,Z=y[A];return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(h.a,{className:"return-home",variant:"contained",color:"secondary",onClick:function(){t.push("/")},children:"Back to Home"}),V&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("br",{}),Object(f.jsx)(g.a,{className:"map-name",label:"Map Name",value:v,onChange:function(e){return x(e.target.value)},variant:"outlined"}),Object(f.jsx)("br",{}),Object(f.jsx)(g.a,{className:"image-url",label:"Image URL",value:r,onChange:function(e){return i(e.target.value)},variant:"filled"})]})]}),Object(f.jsxs)("div",{className:"content",children:[M&&Object(f.jsx)(w.a,{}),Object(f.jsxs)("div",{className:"image-wrapper",children:[J&&Object.keys(y).map((function(e){var t=y[e];if(t){var n=t.x,c=t.y,a=A===e,r=R(J),i=r.left,s=r.top;return Object(f.jsx)(E.a,{className:"pin",style:{left:"".concat(i+n*J.width,"px"),top:"".concat(s+c*J.height,"px"),color:a?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%)".concat(a?"scale(2)":"")},onClick:function(){return function(e){T(e===A?null:e)}(e)},onContextMenu:function(t){return function(e,t){t.preventDefault(),y[e];var n=Object(j.a)(y,[e].map(l.a));S(n),T()}(e,t)},ref:function(t){(null===Q||void 0===Q?void 0:Q.current)&&(Q.current[e]=t)}},e)}})),Object(f.jsx)("img",{src:r,onClick:function(e){var t=R(J),n=t.left,c=t.top,a=e.pageX-n,r=e.pageY-c,i=a/J.width,s=r/J.height;console.log(e.pageY,c),function(e,t){var n=Object(F.a)();S(Object(b.a)(Object(b.a)({},y),{},Object(u.a)({},n,{x:e,y:t})))}(i,s)},className:"App-logo",alt:"logo",ref:function(e){e&&e!==J&&W(e)}})]})]}),Object(f.jsx)("div",{className:"footer",children:Z&&Object(f.jsx)(z,{pin:Z,onClose:function(){return T()},setPin:function(e){S(Object(b.a)(Object(b.a)({},y),{},Object(u.a)({},A,e)))}})}),D&&Object(f.jsx)("p",{children:"Could not load the requested map!"})]})})},z=function(e){var t=e.pin,n=e.setPin,c=e.onClose,a=t.title,r=t.description;return Object(f.jsxs)(N.a,{className:"description-card",children:[Object(f.jsx)(C.a,{title:Object(f.jsx)(g.a,{className:"title-field",label:"Item Title",value:a,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{title:e.target.value}))}}),action:Object(f.jsx)(y.a,{onClick:c,children:Object(f.jsx)(A.a,{})})}),Object(f.jsx)(S.a,{children:Object(f.jsx)(g.a,{className:"body-field",label:"Item Description",value:r,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{description:e.target.value}))},variant:"outlined",multiline:!0,rows:3})})]})},B=n(155),M=n(159),P=function(){var e=Object(o.h)().mapId,t=L("","image.url"),n=Object(d.a)(t,2),r=n[0],i=n[1],s=L("","name"),j=Object(d.a)(s,2),l=(j[0],j[1]),u=L({},"pins"),b=Object(d.a)(u,2),O=b[0],h=b[1],v=Object(c.useState)(),x=Object(d.a)(v,2),g=x[0],N=x[1],C=Object(c.useState)(!0),y=Object(d.a)(C,2),S=y[0],k=y[1],I=Object(c.useState)(!1),A=Object(d.a)(I,2),F=A[0],T=A[1],Y=Object(c.useState)(),z=Object(d.a)(Y,2),P=z[0],_=z[1],D=Object(c.useState)(),H=Object(d.a)(D,2),U=(H[0],H[1]),q=Object(c.useRef)({}),J=(Object(c.useRef)(),Object(c.useState)([])),W=Object(d.a)(J,2),$=W[0],G=W[1],K=Object(o.g)();Object(c.useEffect)((function(){p.a.get("".concat(m,"/maps")).then((function(e){var t=e.data;G(t)})).catch((function(e){console.error(e)}))}),[]),Object(c.useEffect)((function(){var e=function(){U({height:window.innerHeight,width:window.innerWidth})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(c.useEffect)((function(){e&&(k(!0),p.a.get("".concat(m,"/maps/").concat(e)).then((function(e){var t=e.data;T(!1);var n=t.name,c=t.image,a=t.pins;i(c.url,!1),l(n,!1),h(a,!1)})).catch((function(e){console.error(e),T(!0)})).then((function(){k(!1)})))}),[e]);var Q=!S&&!F,V=$.map((function(e){var t=e.name,n=e._id;return Object(f.jsx)(B.a,{value:n,children:t},n)})),Z=O[g];return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Q&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(M.a,{value:e,exclusive:!0,onChange:function(e,t){console.log(t),K.push("/maps/".concat(t,"/view"))},style:{display:"block"},children:V}),"Tap on an item to learn more about it."]}),Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)("div",{className:"image-wrapper",children:[P&&Object.keys(O).map((function(e){var t=O[e];if(t){var n=t.x,c=t.y,r=g===e,i=R(P),s=i.left,o=i.top;return Object(f.jsx)(a.a.Fragment,{children:Object(f.jsx)(E.a,{className:"pin",style:{left:"".concat(s+n*P.width,"px"),top:"".concat(o+c*P.height,"px"),color:r?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%) ".concat(r?"scale(1.3)":"scale(1)")},onClick:function(){return function(e){N(e===g?null:e)}(e)},ref:function(t){(null===q||void 0===q?void 0:q.current)&&(q.current[e]=t)}})},e)}})),Object(f.jsx)("img",{src:r,className:"App-logo",alt:"logo",ref:function(e){e&&e!==P&&_(e)}})]})}),Object(f.jsx)("div",{className:"footer",children:Object(f.jsx)(X,{pin:Z,onClose:function(){return N()}})})]}),S&&Object(f.jsx)(w.a,{}),F&&Object(f.jsx)("p",{children:"Could not load the requested map!"})]})})},X=function(e){var t=e.pin,n=e.onClose,c=t||{},a=c.title,r=c.description;return Object(f.jsxs)(N.a,{className:"description-card",style:t?{opacity:1}:{opacity:0},children:[Object(f.jsx)(C.a,{title:Object(f.jsx)("h5",{className:"desc-header",children:a}),action:Object(f.jsx)(y.a,{onClick:n,children:Object(f.jsx)(A.a,{})})}),Object(f.jsx)(S.a,{children:Object(f.jsx)("p",{className:"desc-body",children:r})})]})},_=function(){return Object(f.jsx)(s.a,{basename:"/",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",children:Object(f.jsx)(x,{})}),Object(f.jsx)(o.b,{path:"/maps/:mapId/view",children:Object(f.jsx)(P,{})}),Object(f.jsx)(o.b,{path:"/maps/:mapId",children:Object(f.jsx)(Y,{})}),Object(f.jsx)(o.a,{to:"/"})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(_,{})}),document.getElementById("root")),D()},87:function(e,t,n){},88:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.88fce9ac.chunk.js.map