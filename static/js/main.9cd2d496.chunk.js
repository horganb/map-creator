(this["webpackJsonpmap-creator"]=this["webpackJsonpmap-creator"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(10),r=n.n(o),i=(n(85),n(86),n(36)),s=n(11),l=n(71),j=n(70),u=n(25),b=n(23),p=n(19),O=n(28),d=n.n(O),h=n(145),m=n(6),f="https://map-creator-backend.herokuapp.com",v={name:"Untitled Map",image:{url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"},pins:{}},x=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(s.g)();Object(a.useEffect)((function(){d.a.get("".concat(f,"/maps")).then((function(e){var t=e.data;c(t)})).catch((function(e){console.error(e)}))}),[]);var r=function(e){o.push(D("/maps/".concat(e)))},i=n.map((function(e){var t=e.name,n=e._id;return Object(m.jsx)(h.a,{className:"map-button",variant:"contained",onClick:function(){return r(n)},children:t},n)}));return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsx)(h.a,{className:"map-button",variant:"contained",color:"primary",onClick:function(){d.a.post("".concat(f,"/maps"),v).then((function(e){var t=e.data;r(t)})).catch((function(e){console.error(e)}))},children:"Create New"}),i]})})},g=n(153),C=n(149),N=n(150),y=n(155),w=n(151),k=n(152),S=n(68),I=n.n(S),E=n(69),F=n.n(E),T=n(154),A=function(e,t){var n=Object(a.useState)(e),c=Object(p.a)(n,2),o=c[0],r=c[1],i=Object(s.h)().mapId,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.SET,n=Object(u.a)({},t,e);d.a.put("".concat(f,"/maps/").concat(i),n).then((function(){})).catch((function(e){console.error(e)}))};return[o,function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r(e),n&&l(Object(u.a)({},t,e))}]},B={SET:"$set",UNSET:"$unset"},M=function(){var e=Object(s.h)().mapId,t=Object(s.g)(),n=A("","image.url"),o=Object(p.a)(n,2),r=o[0],i=o[1],O=A("","name"),v=Object(p.a)(O,2),x=v[0],N=v[1],y=A({},"pins"),w=Object(p.a)(y,2),k=w[0],S=w[1],E=Object(a.useState)(),F=Object(p.a)(E,2),B=F[0],M=F[1],L=Object(a.useState)(!0),U=Object(p.a)(L,2),_=U[0],J=U[1],R=Object(a.useState)(!1),X=Object(p.a)(R,2),Y=X[0],$=X[1],q=Object(a.useState)(),H=Object(p.a)(q,2),z=H[0],G=H[1];Object(a.useEffect)((function(){e&&(J(!0),d.a.get("".concat(f,"/maps/").concat(e)).then((function(e){var t=e.data;$(!1);var n=t.name,a=t.image,c=t.pins;i(a.url,!1),N(n,!1),S(c,!1)})).catch((function(e){console.error(e),$(!0)})).then((function(){J(!1)})))}),[e]);var K=!_&&!Y;return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsxs)("div",{className:"metadata-section",children:[Object(m.jsx)(h.a,{className:"return-home",variant:"contained",color:"secondary",onClick:function(){t.push(D("/"))},children:"Back to Home"}),K&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("br",{}),Object(m.jsx)(g.a,{className:"map-name",label:"Map Name",value:x,onChange:function(e){return N(e.target.value)},variant:"outlined"}),Object(m.jsx)("br",{}),Object(m.jsx)(g.a,{className:"image-url",label:"Image URL",value:r,onChange:function(e){return i(e.target.value)},variant:"filled"})]})]}),K&&Object(m.jsxs)("div",{className:"image-container",children:[z&&Object.keys(k).map((function(e){var t=k[e];if(t){var n=t.x,a=t.y,o=n*z.width,r=a*z.height,i=B===e;return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(I.a,{className:"pin",style:{left:o,top:r,color:i?"yellow":"red"},onClick:function(){return function(e){M(e===B?null:e)}(e)},onContextMenu:function(t){return function(e,t){t.preventDefault(),k[e];var n=Object(l.a)(k,[e].map(j.a));S(n),M()}(e,t)}}),Object(m.jsx)(P,{pin:t,x:o,y:r,onClose:function(){return M()},show:i,setPin:function(t){S(Object(b.a)(Object(b.a)({},k),{},Object(u.a)({},e,t)))}})]},e)}})),Object(m.jsx)("img",{src:r,onClick:function(e){var t=function(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}(z),n=t.left,a=t.top,c=e.pageX-n,o=e.pageY-a;!function(e,t){var n=Object(T.a)();S(Object(b.a)(Object(b.a)({},k),{},Object(u.a)({},n,{x:e,y:t})))}(c/z.width,o/z.height)},className:"App-logo",alt:"logo",ref:function(e){e&&e!==z&&G(e)}})]}),_&&Object(m.jsx)(C.a,{}),Y&&Object(m.jsx)("p",{children:"Could not load the requested map!"})]})})},P=function(e){var t=e.x,n=e.y,a=e.pin,c=e.setPin,o=e.onClose,r=e.show,i=a.title,s=a.description;a.color;return Object(m.jsxs)(N.a,{className:"description-card",style:{left:t,top:n,opacity:r?1:0,pointerEvents:r?void 0:"none"},children:[Object(m.jsx)(y.a,{title:Object(m.jsx)(g.a,{className:"title-field",label:"Item Title",value:i,onChange:function(e){return c(Object(b.a)(Object(b.a)({},a),{},{title:e.target.value}))}}),action:Object(m.jsx)(w.a,{onClick:o,children:Object(m.jsx)(F.a,{})})}),Object(m.jsx)(k.a,{children:Object(m.jsx)(g.a,{className:"body-field",label:"Item Description",value:s,onChange:function(e){return c(Object(b.a)(Object(b.a)({},a),{},{description:e.target.value}))},variant:"outlined",multiline:!0,rows:3})})]})},D=function(e){return"".concat(L).concat(e)},L="/map-creator",U=function(){return Object(m.jsx)(i.a,{children:Object(m.jsxs)(s.d,{children:[Object(m.jsx)(s.b,{exact:!0,path:D("/"),children:Object(m.jsx)(x,{})}),Object(m.jsx)(s.b,{path:D("/maps/:mapId"),children:Object(m.jsx)(M,{})}),Object(m.jsx)(s.a,{to:D("/")})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(U,{})}),document.getElementById("root")),_()},85:function(e,t,n){},86:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.9cd2d496.chunk.js.map