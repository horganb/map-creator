(this["webpackJsonpmap-creator"]=this["webpackJsonpmap-creator"]||[]).push([[0],{116:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(10),i=c.n(r),s=(c(85),c(86),c(30)),o=c(11),l=c(49),j=c(48),u=c(26),b=c(24),d=c(12),O=c(23),p=c.n(O),h=c(145),m=c(3),f="https://map-creator-backend.herokuapp.com",v={name:"Untitled Map",image:{url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"},pins:{}},x=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(o.g)();Object(n.useEffect)((function(){p.a.get("".concat(f,"/maps")).then((function(e){var t=e.data;a(t)})).catch((function(e){console.error(e)}))}),[]);var i=function(e){r.push("/maps/".concat(e))},s=c.map((function(e){var t=e.name,c=e._id;return Object(m.jsx)(h.a,{className:"map-button",variant:"contained",onClick:function(){return i(c)},children:t},c)}));return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsx)(h.a,{className:"map-button",variant:"contained",color:"primary",onClick:function(){p.a.post("".concat(f,"/maps"),v).then((function(e){var t=e.data;i(t)})).catch((function(e){console.error(e)}))},children:"Create New"}),s]})})},g=c(153),N=c(149),w=c(150),C=c(155),y=c(151),S=c(152),k=c(45),E=c.n(k),I=c(46),A=c.n(I),F=c(154),T=function(e,t){var c=Object(n.useState)(e),a=Object(d.a)(c,2),r=a[0],i=a[1],s=Object(o.h)().mapId,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.SET,c=Object(u.a)({},t,e);p.a.put("".concat(f,"/maps/").concat(s),c).then((function(){})).catch((function(e){console.error(e)}))};return[r,function(e){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i(e),c&&l(Object(u.a)({},t,e))}]},Y={SET:"$set",UNSET:"$unset"},L=function(){var e=Object(o.h)().mapId,t=Object(o.g)(),c=T("","image.url"),a=Object(d.a)(c,2),r=a[0],i=a[1],s=T("","name"),O=Object(d.a)(s,2),v=O[0],x=O[1],w=T({},"pins"),C=Object(d.a)(w,2),y=C[0],S=C[1],k=Object(n.useState)(),I=Object(d.a)(k,2),A=I[0],Y=I[1],L=Object(n.useState)(!0),M=Object(d.a)(L,2),P=M[0],R=M[1],X=Object(n.useState)(!1),D=Object(d.a)(X,2),H=D[0],U=D[1],_=Object(n.useState)(),q=Object(d.a)(_,2),z=q[0],J=q[1],W=Object(n.useRef)({});Object(n.useEffect)((function(){e&&(R(!0),p.a.get("".concat(f,"/maps/").concat(e)).then((function(e){var t=e.data;U(!1);var c=t.name,n=t.image,a=t.pins;i(n.url,!1),x(c,!1),S(a,!1)})).catch((function(e){console.error(e),U(!0)})).then((function(){R(!1)})))}),[e]);var $=!P&&!H,G=y[A];return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)(h.a,{className:"return-home",variant:"contained",color:"secondary",onClick:function(){t.push("/")},children:"Back to Home"}),$&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("br",{}),Object(m.jsx)(g.a,{className:"map-name",label:"Map Name",value:v,onChange:function(e){return x(e.target.value)},variant:"outlined"}),Object(m.jsx)("br",{}),Object(m.jsx)(g.a,{className:"image-url",label:"Image URL",value:r,onChange:function(e){return i(e.target.value)},variant:"filled"})]})]}),Object(m.jsxs)("div",{className:"content",children:[P&&Object(m.jsx)(N.a,{}),Object(m.jsxs)("div",{className:"image-wrapper",children:[z&&Object.keys(y).map((function(e){var t=y[e];if(t){var c=t.x,n=t.y,a=A===e;return Object(m.jsx)(E.a,{className:"pin",style:{left:"".concat(100*c,"%"),top:"".concat(100*n,"%"),color:a?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%)".concat(a?"scale(2)":"")},onClick:function(){return function(e){Y(e===A?null:e)}(e)},onContextMenu:function(t){return function(e,t){t.preventDefault(),y[e];var c=Object(l.a)(y,[e].map(j.a));S(c),Y()}(e,t)},ref:function(t){(null===W||void 0===W?void 0:W.current)&&(W.current[e]=t)}},e)}})),Object(m.jsx)("img",{src:r,onClick:function(e){var t=function(e){var t=e.getBoundingClientRect();return console.log("top",t.top,"scroll",window.scrollY),{left:t.left+window.scrollX,top:t.top+window.scrollY}}(z),c=t.left,n=t.top,a=e.pageX-c,r=e.pageY-n,i=a/z.width,s=r/z.height;console.log(e.pageY,n),function(e,t){var c=Object(F.a)();S(Object(b.a)(Object(b.a)({},y),{},Object(u.a)({},c,{x:e,y:t})))}(i,s)},className:"App-logo",alt:"logo",ref:function(e){e&&e!==z&&J(e)}})]})]}),Object(m.jsx)("div",{className:"footer",children:G&&Object(m.jsx)(B,{pin:G,onClose:function(){return Y()},setPin:function(e){S(Object(b.a)(Object(b.a)({},y),{},Object(u.a)({},A,e)))}})}),H&&Object(m.jsx)("p",{children:"Could not load the requested map!"})]})})},B=function(e){var t=e.pin,c=e.setPin,n=e.onClose,a=t.title,r=t.description;return Object(m.jsxs)(w.a,{className:"description-card",children:[Object(m.jsx)(C.a,{title:Object(m.jsx)(g.a,{className:"title-field",label:"Item Title",value:a,onChange:function(e){return c(Object(b.a)(Object(b.a)({},t),{},{title:e.target.value}))}}),action:Object(m.jsx)(y.a,{onClick:n,children:Object(m.jsx)(A.a,{})})}),Object(m.jsx)(S.a,{children:Object(m.jsx)(g.a,{className:"body-field",label:"Item Description",value:r,onChange:function(e){return c(Object(b.a)(Object(b.a)({},t),{},{description:e.target.value}))},variant:"outlined",multiline:!0,rows:3})})]})},M=function(){var e=Object(o.h)().mapId,t=T("","image.url"),c=Object(d.a)(t,2),r=c[0],i=c[1],s=T("","name"),l=Object(d.a)(s,2),j=(l[0],l[1]),u=T({},"pins"),b=Object(d.a)(u,2),O=b[0],h=b[1],v=Object(n.useState)(),x=Object(d.a)(v,2),g=x[0],w=x[1],C=Object(n.useState)(!0),y=Object(d.a)(C,2),S=y[0],k=y[1],I=Object(n.useState)(!1),A=Object(d.a)(I,2),F=A[0],Y=A[1],L=Object(n.useState)(),B=Object(d.a)(L,2),M=B[0],R=B[1],X=Object(n.useState)({height:window.innerHeight,width:window.innerWidth}),D=Object(d.a)(X,2),H=(D[0],D[1]),U=Object(n.useRef)({});Object(n.useEffect)((function(){var e=function(){H({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),Object(n.useEffect)((function(){e&&(k(!0),p.a.get("".concat(f,"/maps/").concat(e)).then((function(e){var t=e.data;Y(!1);var c=t.name,n=t.image,a=t.pins;i(n.url,!1),j(c,!1),h(a,!1)})).catch((function(e){console.error(e),Y(!0)})).then((function(){k(!1)})))}),[e]);var _=!S&&!F,q=O[g];return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("header",{className:"App-header",children:[_&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"header",children:"Tap on an item to learn more about it."}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"image-wrapper",children:[M&&Object.keys(O).map((function(e){var t=O[e];if(t){var c=t.x,n=t.y,r=g===e;return Object(m.jsx)(a.a.Fragment,{children:Object(m.jsx)(E.a,{className:"pin",style:{left:"".concat(100*c,"%"),top:"".concat(100*n,"%"),color:r?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%) ".concat(r?"scale(2)":"scale(1)")},onClick:function(){return function(e){w(e===g?null:e)}(e)},ref:function(t){(null===U||void 0===U?void 0:U.current)&&(U.current[e]=t)}})},e)}})),Object(m.jsx)("img",{src:r,className:"App-logo",alt:"logo",ref:function(e){e&&e!==M&&R(e)}})]})}),Object(m.jsx)("div",{className:"footer",children:Object(m.jsx)(P,{pin:q,onClose:function(){return w()}})})]}),S&&Object(m.jsx)(N.a,{}),F&&Object(m.jsx)("p",{children:"Could not load the requested map!"})]})})},P=function(e){var t=e.pin,c=e.onClose,n=t||{},a=n.title,r=n.description;return Object(m.jsxs)(w.a,{className:"description-card",style:t?{opacity:1}:{opacity:0},children:[Object(m.jsx)(C.a,{title:Object(m.jsx)("h5",{className:"desc-header",children:a}),action:Object(m.jsx)(y.a,{onClick:c,children:Object(m.jsx)(A.a,{})})}),Object(m.jsx)(S.a,{children:Object(m.jsx)("p",{className:"desc-body",children:r})})]})},R=function(){return Object(m.jsx)(s.a,{basename:"/",children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{exact:!0,path:"/",children:Object(m.jsx)(x,{})}),Object(m.jsx)(o.b,{path:"/maps/:mapId/view",children:Object(m.jsx)(M,{})}),Object(m.jsx)(o.b,{path:"/maps/:mapId",children:Object(m.jsx)(L,{})}),Object(m.jsx)(o.a,{to:"/"})]})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,157)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root")),X()},85:function(e,t,c){},86:function(e,t,c){}},[[116,1,2]]]);
//# sourceMappingURL=main.1fbf3454.chunk.js.map