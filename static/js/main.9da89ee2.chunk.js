(this["webpackJsonpmap-creator"]=this["webpackJsonpmap-creator"]||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(11),r=n.n(i),o=(n(87),n(88),n(30)),s=n(13),j=n(50),l=n(49),u=n(26),b=n(24),d=n(10),O=n(22),f=n.n(O),p=n(147),h=n(3),m="https://map-creator-backend.herokuapp.com",v={name:"Untitled Map",image:{url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"},pins:{}},x=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(s.g)();Object(c.useEffect)((function(){f.a.get("".concat(m,"/maps")).then((function(e){var t=e.data;a(t)})).catch((function(e){console.error(e)}))}),[]);var r=function(e){i.push("/maps/".concat(e))},o=n.map((function(e){var t=e.name,n=e._id;return Object(h.jsx)(p.a,{className:"map-button",variant:"contained",onClick:function(){return r(n)},children:t},n)}));return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)(p.a,{className:"map-button",variant:"contained",color:"primary",onClick:function(){f.a.post("".concat(m,"/maps"),v).then((function(e){var t=e.data;r(t)})).catch((function(e){console.error(e)}))},children:"Create New"}),o]})})},g=n(156),w=n(151),N=n(152),C=n(158),S=n(153),y=n(154),k=n(46),E=n.n(k),I=n(47),T=n.n(I),A=n(157),F=function(e,t){var n=Object(c.useState)(e),a=Object(d.a)(n,2),i=a[0],r=a[1],o=Object(s.h)().mapId,j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.SET,n=Object(u.a)({},t,e);f.a.put("".concat(m,"/maps/").concat(o),n).then((function(){})).catch((function(e){console.error(e)}))};return[i,function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r(e),n&&j(Object(u.a)({},t,e))}]},L={SET:"$set",UNSET:"$unset"},B=function(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}},R=function(){var e=Object(s.h)().mapId,t=Object(s.g)(),n=F("","image.url"),a=Object(d.a)(n,2),i=a[0],r=a[1],o=F("","name"),O=Object(d.a)(o,2),v=O[0],x=O[1],N=F({},"pins"),C=Object(d.a)(N,2),S=C[0],y=C[1],k=Object(c.useState)(),I=Object(d.a)(k,2),T=I[0],L=I[1],R=Object(c.useState)(!0),z=Object(d.a)(R,2),M=z[0],P=z[1],X=Object(c.useState)(!1),_=Object(d.a)(X,2),D=_[0],H=_[1],U=Object(c.useState)(),q=Object(d.a)(U,2),J=q[0],W=q[1],$=Object(c.useState)(),G=Object(d.a)($,2),K=(G[0],G[1]),Q=Object(c.useRef)({});Object(c.useEffect)((function(){e&&(P(!0),f.a.get("".concat(m,"/maps/").concat(e)).then((function(e){var t=e.data;H(!1);var n=t.name,c=t.image,a=t.pins;r(c.url,!1),x(n,!1),y(a,!1)})).catch((function(e){console.error(e),H(!0)})).then((function(){P(!1)})))}),[e]);Object(c.useEffect)((function(){var e=function(){K({height:window.innerHeight,width:window.innerWidth})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var V=!M&&!D,Z=S[T];return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)(p.a,{className:"return-home",variant:"contained",color:"secondary",onClick:function(){t.push("/")},children:"Back to Home"}),V&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("br",{}),Object(h.jsx)(g.a,{className:"map-name",label:"Map Name",value:v,onChange:function(e){return x(e.target.value)},variant:"outlined"}),Object(h.jsx)("br",{}),Object(h.jsx)(g.a,{className:"image-url",label:"Image URL",value:i,onChange:function(e){return r(e.target.value)},variant:"filled"})]})]}),Object(h.jsxs)("div",{className:"content",children:[M&&Object(h.jsx)(w.a,{}),Object(h.jsxs)("div",{className:"image-wrapper",children:[J&&Object.keys(S).map((function(e){var t=S[e];if(t){var n=t.x,c=t.y,a=T===e,i=B(J),r=i.left,o=i.top;return Object(h.jsx)(E.a,{className:"pin",style:{left:"".concat(r+n*J.width,"px"),top:"".concat(o+c*J.height,"px"),color:a?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%)".concat(a?"scale(2)":"")},onClick:function(){return function(e){L(e===T?null:e)}(e)},onContextMenu:function(t){return function(e,t){t.preventDefault(),S[e];var n=Object(j.a)(S,[e].map(l.a));y(n),L()}(e,t)},ref:function(t){(null===Q||void 0===Q?void 0:Q.current)&&(Q.current[e]=t)}},e)}})),Object(h.jsx)("img",{src:i,onClick:function(e){var t=B(J),n=t.left,c=t.top,a=e.pageX-n,i=e.pageY-c,r=a/J.width,o=i/J.height;console.log(e.pageY,c),function(e,t){var n=Object(A.a)();y(Object(b.a)(Object(b.a)({},S),{},Object(u.a)({},n,{x:e,y:t})))}(r,o)},className:"App-logo",alt:"logo",ref:function(e){e&&e!==J&&W(e)}})]})]}),Object(h.jsx)("div",{className:"footer",children:Z&&Object(h.jsx)(Y,{pin:Z,onClose:function(){return L()},setPin:function(e){y(Object(b.a)(Object(b.a)({},S),{},Object(u.a)({},T,e)))}})}),D&&Object(h.jsx)("p",{children:"Could not load the requested map!"})]})})},Y=function(e){var t=e.pin,n=e.setPin,c=e.onClose,a=t.title,i=t.description;return Object(h.jsxs)(N.a,{className:"description-card",children:[Object(h.jsx)(C.a,{title:Object(h.jsx)(g.a,{className:"title-field",label:"Item Title",value:a,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{title:e.target.value}))}}),action:Object(h.jsx)(S.a,{onClick:c,children:Object(h.jsx)(T.a,{})})}),Object(h.jsx)(y.a,{children:Object(h.jsx)(g.a,{className:"body-field",label:"Item Description",value:i,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{description:e.target.value}))},variant:"outlined",multiline:!0,rows:3})})]})},z=n(155),M=n(159),P=function(){var e=Object(s.h)().mapId,t=F("","image.url"),n=Object(d.a)(t,2),i=n[0],r=n[1],o=F("","name"),j=Object(d.a)(o,2),l=(j[0],j[1]),u=F({},"pins"),b=Object(d.a)(u,2),O=b[0],p=b[1],v=Object(c.useState)(),x=Object(d.a)(v,2),g=x[0],N=x[1],C=Object(c.useState)(!0),S=Object(d.a)(C,2),y=S[0],k=S[1],I=Object(c.useState)(!1),T=Object(d.a)(I,2),A=T[0],L=T[1],R=Object(c.useState)(),Y=Object(d.a)(R,2),P=Y[0],_=Y[1],D=Object(c.useState)(),H=Object(d.a)(D,2),U=(H[0],H[1]),q=Object(c.useState)(!1),J=Object(d.a)(q,2),W=(J[0],J[1]),$=Object(c.useRef)({}),G=(Object(c.useRef)(),Object(c.useState)([])),K=Object(d.a)(G,2),Q=K[0],V=K[1],Z=Object(s.g)();Object(c.useEffect)((function(){f.a.get("".concat(m,"/maps")).then((function(e){var t=e.data;V(t)})).catch((function(e){console.error(e)}))}),[]);var ee=function(){U({height:window.innerHeight,width:window.innerWidth}),W((function(e){return!e}))};Object(c.useEffect)((function(){return ee(),window.addEventListener("resize",ee),function(){window.removeEventListener("resize",ee)}}),[]),Object(c.useEffect)((function(){setTimeout((function(){ee()}),100),setTimeout((function(){ee()}),700),setTimeout((function(){ee()}),5e3)}),[e]),Object(c.useEffect)((function(){e&&(k(!0),f.a.get("".concat(m,"/maps/").concat(e)).then((function(e){var t=e.data;L(!1);var n=t.name,c=t.image,a=t.pins;r(c.url,!1),l(n,!1),p(a,!1)})).catch((function(e){console.error(e),L(!0)})).then((function(){k(!1)})))}),[e]);var te=!y&&!A,ne=Q.map((function(e){var t=e.name,n=e._id;return Object(h.jsx)(z.a,{value:n,children:t},n)})),ce=O[g];return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[te&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)(M.a,{value:e,exclusive:!0,onChange:function(e,t){console.log(t),Z.push("/maps/".concat(t,"/view"))},style:{display:"block",marginBottom:"8px"},children:ne}),"Tap on an item to learn more about it."]}),Object(h.jsx)("div",{className:"content",children:Object(h.jsxs)("div",{className:"image-wrapper",children:[P&&Object.keys(O).map((function(e){var t=O[e];if(t){var n=t.x,c=t.y,i=g===e,r=B(P),o=r.left,s=r.top;return Object(h.jsx)(a.a.Fragment,{children:Object(h.jsx)(E.a,{className:"pin",style:{left:"".concat(o+n*P.width,"px"),top:"".concat(s+c*P.height,"px"),color:i?"rgb(61, 161, 143)":"rgb(37, 247, 209)",transform:"translateX(-50%) translateY(-50%) ".concat(i?"scale(1.3)":"scale(1)")},onClick:function(){return function(e){N(e===g?null:e)}(e)},ref:function(t){(null===$||void 0===$?void 0:$.current)&&($.current[e]=t)}})},e)}})),Object(h.jsx)("img",{src:i,className:"App-logo",alt:"logo",ref:function(e){e&&e!==P&&_(e)}})]})}),Object(h.jsx)("div",{className:"footer",children:Object(h.jsx)(X,{pin:ce,onClose:function(){return N()}})})]}),y&&Object(h.jsx)(w.a,{}),A&&Object(h.jsx)("p",{children:"Could not load the requested map!"})]})})},X=function(e){var t=e.pin,n=e.onClose,c=t||{},a=c.title,i=c.description;return Object(h.jsxs)(N.a,{className:"description-card",style:t?{opacity:1}:{opacity:0},children:[Object(h.jsx)(C.a,{title:Object(h.jsx)("h5",{className:"desc-header",children:a}),action:Object(h.jsx)(S.a,{onClick:n,children:Object(h.jsx)(T.a,{})})}),Object(h.jsx)(y.a,{children:Object(h.jsx)("p",{className:"desc-body",children:i})})]})},_=function(){return Object(h.jsx)(o.a,{basename:"/",children:Object(h.jsxs)(s.d,{children:[Object(h.jsx)(s.b,{exact:!0,path:"/",children:Object(h.jsx)(x,{})}),Object(h.jsx)(s.b,{path:"/maps/:mapId/view",children:Object(h.jsx)(P,{})}),Object(h.jsx)(s.b,{path:"/maps/:mapId",children:Object(h.jsx)(R,{})}),Object(h.jsx)(s.a,{to:"/"})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(_,{})}),document.getElementById("root")),D()},87:function(e,t,n){},88:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.9da89ee2.chunk.js.map